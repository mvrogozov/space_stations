# Проект space stations.
***
Проект space stations служит для создания космических станций и их передвижения.
***

## Возможности.

* Добавление станции.
* Просмотр координат станции.
* При переходе в отрицательные координаты статус станции меняется на "broken".
***

## Модели в проекте.
***

```
Station
```
Модель космической станции.
Константы:
* ```CHOICES``` - кортеж значений статусов.
Поля:
* ```name``` - текстовое. Имя станции.
* ```status``` - текстовое, выбор из предустановленных значений. Статус станции.
* ```create_date``` - дата. Время создания станции, добавляется автоматически.
* ```brake_date``` - дата. Время поломки станции. Может быть пустым.
***

```
Coordinates
```
Модель координат.
Поля:
* ```x``` - целое. Координата х. По умолчанию 100.
* ```y``` - целое. Координата y. По умолчанию 100.
* ```z``` - целое. Координата z. По умолчанию 100.
* ```station``` - связанное поле (один к одному). Связь с моделью Station.
***
```
Command
```
Модель команд.
Константы:
* ```CHOICES``` - кортеж значений осей кординат.
Поля:
* ```user``` - связанное поле (один ко многим). Связь с моделью пользователя.
* ```axis``` - текстовое, выбор из предустановленных значений. Ось координат.
* ```distance``` - целое. Расстояние на которое передвинется станция по выбранной оси.
* ```station``` - связанное поле (один ко многим). Связь с моделью Station.
***
***
## Представления в проекте.
```
StationViewSet
```
Вьюсет для обработки запросов к API на основе класса
ModelViewSet из библиотеки rest_framework.viewsets.
* Используется стандартная работа класса для модели Station.
* Добавлен метод ```state``` для обработки запросов на API для команд.
Доступные методы: ```GET```, ```POST```

***
***
***
После запуска через docker-compose необходимо создать БД (если еще нет) с именем указанным в переменной окружения DB_NAME
и настроить доступ к ней для пользователя указанного в переменной POSTGRES_USER:
```
docker exec -t -i yourdbcontainernumber bash
psql -U 'POSTGRES_USER'
CREATE DATABASE 'DB_NAME';
GRANT ALL PRIVILEGES ON DATABASE 'DB_NAME' TO 'POSTGRES_USER';
```
***
После этого необходимо выполнить миграции в контейнере backend:
```docker exec -t -i yourdbcontainernumber bash```
Перейти в папку с ```manage.py``` и выполнить 
```python3 manage.py migrate``` и ```python3 manage.py createsuperuser```

Переменные окружения, необходимые для запуска:

* DB_ENGINE - настройка ENGINE для БД в django.settings
* DB_HOST - имя хоста с БД (в проекте - 'db')
* DB_NAME - имя БД (в проекте - 'postgres')
* DB_PORT - порт для БД
* POSTGRES_PASSWORD - пароль БД
* POSTGRES_USER - пользователь БД
* DJANGO_SECRET_KEY - ключ для django проекта

Данные переменные необходимо сохранить в файле ```.env```в каталоге с manage.py

***
Автор:
* Рогозов Михаил